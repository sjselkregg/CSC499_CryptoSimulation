package cryptoSimulation;

public class Miner 
{
	/**
	 * Cost is different for each miner, most miners should possess costs that are
	 * similar to those who mine in popular mining areas. Costs can range from 
	 * $531 to $26170
	 */
	public int cost;
	
	//wealth in USD
	public int wealth;
	public double coinsOwned = 0;
	public double prevCoins = 0;
	
	//how likely a miner is to join/leave a network
	public int sensitivity;
	
	//miners participation status
	public boolean participating = true;
	public int minerID;
	
	//miner pool info
	//0 for none...pools go from 1 to 20
	public int pool;
	
	
	public Miner(int iD)
	{
		minerID = iD;
		
		//calculate cost
		int r = (int)(Math.random() * 100 + 1);
		if(r < 25)
		{
			cost = 530;
		}else if(r < 50)
		{
			cost = 2250;
		}else if(r < 75)
		{
			cost = 4750;
		}else if(r < 90)
		{
			cost = 7750;
		}else
		{
			cost = 11215;
		}
		
		//calculate wealth
		int x = (int)(Math.random() * 100 + 1);
		if(x <= 25)
		{
			wealth = (int)(Math.random() * 50000 + 30000);
		}else if(x <= 87)
		{
			wealth = (int)(Math.random() * 150000 + 50000);
		}else
		{
			wealth = (int)(Math.random() * 500000 + 150000);
		}
		
		//place in mining pool
		if(iD<=50000)
		{
			//half of population placed in most popular mining pools
			pool = (int)(Math.random() * 5 + 1);
		}else if(iD<=98000)
		{
			//the other half split among less popular pools
			pool = (int)(Math.random() * 20 + 1);
		}else
		{
			//about 2% of the population are on their own
			pool = 0;
			//only someone very wealthy could solo mine
			wealth = 500000;
		}
	}
	
	
	/**
	 * Updates the value of a miner's owned coins, and his wealth depending on these coins.
	 * @param value : the value to update the coins with.
	 */
	public void updateCoins(double reward, CryptoCurrency c)
	{
		prevCoins = coinsOwned;
		coinsOwned = coinsOwned - reward;
		
		int change = (int)(c.getValue() * reward);
		wealth = wealth + change;
	}
	
	
	/**
	 * Changes the miners participation status
	 */
	public void changeStatus()
	{
		if(participating == true)
		{
			participating = false;
		}else
		{
			participating = true;
		}
	}
	
	public boolean getStatus()
	{
		return participating;
	}
	
	
	/**
	 * Reacts to a signal call 
	 */
	public void evaluateSituation()
	{
		
	}
	
	
	
	
}
